webpackJsonp([1],{27:function(t,e,i){function s(t){i(70)}var n=i(26)(i(31),i(76),s,null,null);t.exports=n.exports},30:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(29),n=i(27),a=i.n(n),o=i(28);s.a.config.productionTip=!1,s.a.use(o.a),new s.a({el:"#app",template:"<App/>",components:{App:a.a}})},31:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(74),n=i.n(s);e.default={name:"app",components:{Drawable:n.a}}},32:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(33),n=i.n(s),a=i(34),o=i.n(a),r=i(36),l=i.n(r),c=i(35),v=i.n(c);e.default={mounted:function(){this.canvas=this.$refs.inputCanvas,this.context=this.canvas.getContext("2d")},data:function(){return{canvas:{},context:{},settings:{canvasHeight:300,canvasWidth:300,pointSize:3,strokeStyle:"rgba(255,255,255,1)",fillStyle:"#00B5AD"},dragMode:!1,overPoint:{},points:[],cycles:500,polygonCounter:0,resultPoints:[],minPerimeterPoints:[],maxPerimeterPoints:[],minAreaPoints:[],maxAreaPoints:[],minPerimeter:v.a,maxPerimeter:l.a,minArea:v.a,maxArea:l.a,processing:!1,generatedFile:null,ws:null}},computed:{pointsSummary:{get:function(){return this.points.map(function(t){return t.x+", "+t.y}).join("\n")},set:function(t){this.points=t.split("\n").map(function(t){var e=t.replace(/ /g,"").split(",");return console.log(e),{x:parseInt(e[0]),y:parseInt(e[1])}})}}},directives:{insertPoints:function(t,e){var i=JSON.parse(o()(e.value.points)),s=e.value.settings,a=t.getContext("2d");a.clearRect(0,0,s.canvasWidth,s.canvasHeight);var r=!0,l=!1,c=void 0;try{for(var v,u=n()(i);!(r=(v=u.next()).done);r=!0){var d=v.value;a.beginPath(),a.moveTo(d.x-s.pointSize,d.y-s.pointSize),a.lineTo(d.x-s.pointSize,d.y+s.pointSize),a.lineTo(d.x+s.pointSize,d.y+s.pointSize),a.lineTo(d.x+s.pointSize,d.y-s.pointSize),a.lineTo(d.x-s.pointSize,d.y-s.pointSize),a.strokeStyle=s.strokeStyle,a.stroke()}}catch(t){l=!0,c=t}finally{try{!r&&u.return&&u.return()}finally{if(l)throw c}}},insertSides:function(t,e){var i=JSON.parse(o()(e.value.points)),s=e.value.settings,a=t.getContext("2d");if(a.clearRect(0,0,s.canvasWidth,s.canvasHeight),i[0]){a.beginPath(),a.moveTo(i[0][0],i[0][1]);var r=!0,l=!1,c=void 0;try{for(var v,u=n()(i.slice(1));!(r=(v=u.next()).done);r=!0){var d=v.value;a.lineTo(d[0],d[1])}}catch(t){l=!0,c=t}finally{try{!r&&u.return&&u.return()}finally{if(l)throw c}}a.closePath(),a.fillStyle=s.fillStyle,a.fill();var m=!0,p=!1,g=void 0;try{for(var h,f=n()(i.slice(1));!(m=(h=f.next()).done);m=!0){var P=h.value;a.beginPath(),a.moveTo(P[0]-s.pointSize,P[1]-s.pointSize),a.lineTo(P[0]-s.pointSize,P[1]+s.pointSize),a.lineTo(P[0]+s.pointSize,P[1]+s.pointSize),a.lineTo(P[0]+s.pointSize,P[1]-s.pointSize),a.lineTo(P[0]-s.pointSize,P[1]-s.pointSize),a.strokeStyle=s.strokeStyle,a.stroke()}}catch(t){p=!0,g=t}finally{try{!m&&f.return&&f.return()}finally{if(p)throw g}}}}},methods:{removePoint:function(t){this.points.splice(t,1)},matchPoints:function(t,e){return!(e.x>t.x+this.settings.pointSize)&&(!(e.x<t.x-this.settings.pointSize)&&(!(e.y>t.y+this.settings.pointSize)&&!(e.y<t.y-this.settings.pointSize)))},cancel:function(){this.processing=!1,this.ws.close()},submitPoints:function(){var t=this;this.resetCalculatedData();var e={points:this.points,cycles:this.cycles};this.$http.post("http://polygon.science:5000/",e).then(function(e){var i=e.data.uuid;t.generatedFile=i+".json",t.polygonCounter=0,t.processing=!0,t.ws=new WebSocket("ws://polygon.science:5000/polygons/"+i),t.ws.onmessage=function(e){t.polygonCounter+=1;var i=JSON.parse(e.data),s=i.properties.area,n=i.properties.perimeter;n<t.minPerimeter&&(t.minPerimeter=n,t.minPerimeterPoints=i.vertex),n>t.maxPerimeter&&(t.maxPerimeter=n,t.maxPerimeterPoints=i.vertex),s<t.minArea&&(t.minArea=s,t.minAreaPoints=i.vertex),s>t.maxArea&&(t.maxArea=s,t.maxAreaPoints=i.vertex),t.resultPoints=i.vertex},t.ws.onclose=function(e){t.cancel()}})},resetCalculatedData:function(){this.resultPoints=[],this.minPerimeterPoints=[],this.maxPerimeterPoints=[],this.minAreaPoints=[],this.maxAreaPoints=[],this.minPerimeter=v.a,this.maxPerimeter=l.a,this.minArea=v.a,this.maxArea=l.a,this.polygonCounter=0,this.generatedFile=null},clearPoints:function(){this.points=[],this.resetCalculatedData()},getMousePos:function(t){var e=this.context.canvas.getBoundingClientRect();return{x:parseInt((t.clientX-e.left)/(e.right-e.left)*this.settings.canvasWidth),y:parseInt((t.clientY-e.top)/(e.bottom-e.top)*this.settings.canvasHeight)}},mouseup:function(t){var e=this.getMousePos(t);this.dragMode&&this.overPoint?(this.dragPoint(this.overPoint,e),this.dragMode=!1):this.addNode(e)},dragPoint:function(t,e){this.points.map(function(i){i.x===t.x&&i.y===t.y&&(i.x=e.x,i.y=e.y)})},mousemove:function(t){var e=this.getMousePos(t);this.dragMode&&this.overPoint&&this.dragPoint(this.overPoint,e)},mousedown:function(t){var e=this.getMousePos(t);this.isMouseOnNode(e)?this.dragMode=!0:this.dragMode=!1},isMouseOnNode:function(t){return null!==this.selectedPoint(t)},selectedPoint:function(t){var e=!0,i=!1,s=void 0;try{for(var a,o=n()(this.points);!(e=(a=o.next()).done);e=!0){var r=a.value;if(this.matchPoints(r,t))return this.overPoint=r,r}}catch(t){i=!0,s=t}finally{try{!e&&o.return&&o.return()}finally{if(i)throw s}}return this.overPoint=null,null},addNode:function(t){this.points.push(t)}}}},69:function(t,e){},70:function(t,e){},74:function(t,e,i){function s(t){i(69)}var n=i(26)(i(32),i(75),s,null,null);t.exports=n.exports},75:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ui four column grid inverted segment"},[i("h1",[t._v("Polygons")]),t._v(" "),i("div",{staticClass:"four column row"},[i("div",{staticClass:"column"},[i("h3",[t._v("Actions:")]),t._v(" "),t.processing?i("div",[i("button",{staticClass:"ui button teal",on:{click:t.cancel}},[i("div",{staticClass:"ui active inline loader"}),t._v(" Cancel\n        ")])]):i("div",[i("button",{staticClass:"ui button teal",attrs:{disabled:t.processing},on:{click:t.submitPoints}},[t._v("\n          Submit points\n        ")]),t._v(" "),i("button",{staticClass:"ui button yellow",attrs:{disabled:t.processing},on:{click:t.clearPoints}},[t._v("Clear points")]),t._v(" "),t.generatedFile?i("a",{attrs:{href:"/media/"+t.generatedFile,target:"_blank"}},[i("i",{staticClass:"download icon"})]):t._e()]),t._v(" "),i("h3",[t._v("Properties:")]),t._v(" "),i("div",{staticClass:"ui inverted form"},[i("div",{staticClass:"inline fields"},[t._m(0),t._v(" "),i("div",{staticClass:"six wide field"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.settings.canvasWidth,expression:"settings.canvasWidth",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.settings.canvasWidth},on:{input:function(e){e.target.composing||t.$set(t.settings,"canvasWidth",t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),i("div",{staticClass:"inline fields"},[t._m(1),t._v(" "),i("div",{staticClass:"six wide field"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.settings.canvasHeight,expression:"settings.canvasHeight",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.settings.canvasHeight},on:{input:function(e){e.target.composing||t.$set(t.settings,"canvasHeight",t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),i("div",{staticClass:"inline fields"},[t._m(2),t._v(" "),i("div",{staticClass:"six wide field"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.settings.pointSize,expression:"settings.pointSize",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.settings.pointSize},on:{input:function(e){e.target.composing||t.$set(t.settings,"pointSize",t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),i("div",{staticClass:"inline fields"},[t._m(3),t._v(" "),i("div",{staticClass:"six wide field"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.cycles,expression:"cycles",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:t.cycles},on:{input:function(e){e.target.composing||(t.cycles=t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}})])])])]),t._v(" "),i("div",{staticClass:"column"},[i("h3",[t._v("Draw")]),t._v(" "),i("canvas",{directives:[{name:"insert-points",rawName:"v-insert-points",value:{points:t.points,settings:t.settings},expression:"{points: points, settings: settings}"}],ref:"inputCanvas",staticClass:"fat-border",attrs:{width:t.settings.canvasWidth,height:t.settings.canvasHeight},on:{mousedown:t.mousedown,mouseup:t.mouseup,mousemove:t.mousemove}})]),t._v(" "),i("div",{staticClass:"column"},[i("h3",[t._v("CurrentResult ("+t._s(t.polygonCounter)+")")]),t._v(" "),i("canvas",{directives:[{name:"insert-sides",rawName:"v-insert-sides",value:{points:t.resultPoints,settings:t.settings},expression:"{points: resultPoints, settings: settings}"}],ref:"outputCanvas",staticClass:"fat-border",attrs:{width:t.settings.canvasWidth,height:t.settings.canvasHeight}})]),t._v(" "),i("div",{staticClass:"column points",style:{height:t.settings.canvasHeight+55+"px"}},[i("h3",[t._v("Points (data)")]),t._v(" "),i("div",{staticClass:"ui form"},[i("div",{staticClass:"two fields"},[i("div",{staticClass:"field"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.pointsSummary,expression:"pointsSummary"}],style:{height:t.settings.canvasHeight+"px",width:t.settings.canvasWidth+"px"},domProps:{value:t.pointsSummary},on:{input:function(e){e.target.composing||(t.pointsSummary=e.target.value)}}})])])])])]),t._v(" "),i("div",{staticClass:"four column row"},[i("div",{staticClass:"column"},[i("h3",[t._v("Min perimeter ("+t._s(t.minPerimeter)+")")]),t._v(" "),i("canvas",{directives:[{name:"insert-sides",rawName:"v-insert-sides",value:{points:t.minPerimeterPoints,settings:t.settings},expression:"{points: minPerimeterPoints, settings: settings}"}],ref:"minPerimeterCanvas",staticClass:"border",attrs:{width:t.settings.canvasWidth,height:t.settings.canvasHeight}})]),t._v(" "),i("div",{staticClass:"column"},[i("h3",[t._v("Max perimeter ("+t._s(t.maxPerimeter)+")")]),t._v(" "),i("canvas",{directives:[{name:"insert-sides",rawName:"v-insert-sides",value:{points:t.maxPerimeterPoints,settings:t.settings},expression:"{points: maxPerimeterPoints, settings: settings}"}],ref:"maxPerimeterCanvas",staticClass:"border",attrs:{width:t.settings.canvasWidth,height:t.settings.canvasHeight}})]),t._v(" "),i("div",{staticClass:"column"},[i("h3",[t._v("Min area ("+t._s(t.minArea)+")")]),t._v(" "),i("canvas",{directives:[{name:"insert-sides",rawName:"v-insert-sides",value:{points:t.minAreaPoints,settings:t.settings},expression:"{points: minAreaPoints, settings: settings}"}],ref:"minAreaCanvas",staticClass:"border",attrs:{width:t.settings.canvasWidth,height:t.settings.canvasHeight}})]),t._v(" "),i("div",{staticClass:"column"},[i("h3",[t._v("Max area ("+t._s(t.maxArea)+")")]),t._v(" "),i("canvas",{directives:[{name:"insert-sides",rawName:"v-insert-sides",value:{points:t.maxAreaPoints,settings:t.settings},expression:"{points: maxAreaPoints, settings: settings}"}],ref:"maxAreaCanvas",staticClass:"border",attrs:{width:t.settings.canvasWidth,height:t.settings.canvasHeight}})])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"four wide field"},[i("label",[t._v("Width: ")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"four wide field"},[i("label",[t._v("Height: ")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"four wide field"},[i("label",[t._v("Point Size:")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"four wide field"},[i("label",[t._v("Cycles:")])])}]}},76:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ui inverted",attrs:{id:"app"}},[i("drawable")],1)},staticRenderFns:[]}},78:function(t,e){}},[30]);
//# sourceMappingURL=app.b72fc0c3943db1bc5253.js.map